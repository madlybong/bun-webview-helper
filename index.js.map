{"mappings":";;;;;IAGA,iCAAiC;AAEjC,yCAoDA,wDAAwD;CACxD,wDAAwD;CACxD,wDAAwD;CAExD,qBAAqB;CACrB,0CAA0C;CAC1C,WAAW;CAEX,wDAAwD;CACxD,wDAAwD;CACxD,wDAAwD;CAExD,yBAAyB;CACzB,kDAAkD;CAClD,KAAK;CACL,yBAAyB;CACzB,kDAAkD;CAClD,KAAK;CACL,yBAAyB;CACzB,kDAAkD;CAClD,KAAK;CAEL,wBAAwB;CACxB,eAAe;CACf,eAAe;CACf,eAAe;CACf,8BAA8B;CAC9B,8LAA8L;CAC9L,eAAe;CACf,uDAAuD;CACvD,KAAK;GAlFU,IACb,CACE,QAAgB,GAAG,EACnB,SAAiB,GAAG,EACpB,OAAiB,CAAA,GAAA,eAAO,EAAE,GAAG,EAC7B,QAAgB,YAAY,EAC5B,MACA,KACA;QAEA,MAAM,cAAc,CAAA,GAAA,aAAA,EAAE,GAAG,CAAC,SAAS,CAAC,IAAI;YACtC,OAAO,CAAC,SAAS,EAAE,IAAI,GAAG,EAAE,GAAG,EAAE,CAAC;QACpC;QACA,QAAQ,KAAK,CAAC;QACd,MAAM,OAAO,IAAI,KACf,CAAA,GAAA,aAAA,EAAE,OAAO,CACP,CAAA,GAAA,aAAA,EAAE,MAAM,CACN;YACE,CAAC,yBAAyB,CAAC;YAC3B,CAAC,gDAAgD,CAAC;YAClD,CAAC,uBAAuB,CAAC;YACzB,CAAC;uBACU,EAAE,MAAM;wBACP,EAAE,OAAO;sBACX,EAAE,KAAK;eACd,CAAC;SACL,EACD,CAAA,GAAA,aAAA,EAAE,OAAO,CAAC,eAAe,cAAc,EAAE,EACzC;YACE,CAAC,YAAY,EAAE,MAAM,EAAE,CAAC;YACxB,CAAC,YAAY,EAAE,KAAK,GAAG,CAAC;YACxB,CAAC,aAAa,EAAE,IAAI,GAAG,CAAC;YACxB,CAAC,SAAS,CAAC;SACZ,IAGL;YACE,MAAM;QACR;QAGF,MAAM,UAAU,IAAI,eAAe,CAAC;QACpC,MAAM,SAAS,IAAI,OAAO,SAAS;YAAE,MAAM;QAAS;QACpD,OAAO,gBAAgB,CAAC,QAAQ;YAC9B,QAAQ,GAAG,CAAC;QACd;QACA,OAAO,gBAAgB,CAAC,SAAS,CAAC;YAChC,QAAQ,GAAG,CAAC,iBAAiB;QAC/B;QACA,OAAO;IACT","sources":["index.ts"],"sourcesContent":["import _ from \"lodash\";\r\nimport { SizeHint } from \"webview-bun\";\r\n\r\n// console.log(\"Hello via Bun!\");\r\n\r\nexport default () =>\r\n  (\r\n    width: Number = 800,\r\n    height: Number = 600,\r\n    hint: SizeHint = SizeHint.MIN,\r\n    title: string = \"New Window\",\r\n    html: string | undefined = undefined,\r\n    url: string | undefined = undefined,\r\n    actions?: { [K: string]: Function }\r\n  ): Worker => {\r\n    const bindMethods = _.map(actions, (fn, key) => {\r\n      return `wv.bind(\"${key}\", ${fn});`;\r\n    });\r\n    console.table(bindMethods);\r\n    const blob = new Blob(\r\n      _.flatten(\r\n        _.concat(\r\n          [\r\n            `declare var self: Worker;`,\r\n            `import { SizeHint, Webview } from \"webview-bun\";`,\r\n            `import _ from \"lodash\";`,\r\n            `const wv = new Webview(true, {\r\n                width: ${width},\r\n                height: ${height},\r\n                hint: ${hint},\r\n            });`,\r\n          ],\r\n          _.isArray(bindMethods) ? bindMethods : [],\r\n          [\r\n            `wv.title = '${title}';`,\r\n            `wv.setHTML('${html}');`,\r\n            `wv.navigate('${url}');`,\r\n            `wv.run();`,\r\n          ]\r\n        )\r\n      ),\r\n      {\r\n        type: \"application/typescript\",\r\n      }\r\n    );\r\n\r\n    const blobUrl = URL.createObjectURL(blob);\r\n    const worker = new Worker(blobUrl, { type: \"module\" });\r\n    worker.addEventListener(\"open\", () => {\r\n      console.log(\"New worker.\");\r\n    });\r\n    worker.addEventListener(\"error\", (error) => {\r\n      console.log(\"Worker error.\", error);\r\n    });\r\n    return worker;\r\n  };\r\n\r\n////////////////////////////////////////////////////////\r\n//// Check if the thread in blocking ...................\r\n////////////////////////////////////////////////////////\r\n\r\n//setInterval(() => {\r\n//  console.log(new Date().toISOString());\r\n//}, 5000);\r\n\r\n////////////////////////////////////////////////////////\r\n//// Sample code .......................................\r\n////////////////////////////////////////////////////////\r\n\r\n// const press1 = () => {\r\n//   console.log(\"Triggered from window Press 1\");\r\n// };\r\n// const press2 = () => {\r\n//   console.log(\"Triggered from window Press 2\");\r\n// };\r\n// const press3 = () => {\r\n//   console.log(\"Triggered from window Press 3\");\r\n// };\r\n\r\n// const wv = newWindow(\r\n//   undefined,\r\n//   undefined,\r\n//   undefined,\r\n//   new Date().toISOString(),\r\n//   `<h1>${new Date().toISOString()}</h1><button onclick=\"press1();\">Click 1</button><button onclick=\"window.press2();\">Click 2</button><button onclick=\"window.press3();\">Click 3</button>`,\r\n//   undefined,\r\n//   { press1: press1, press2: press2, press3: press3 }\r\n// );\r\n"],"names":[],"version":3,"file":"index.js.map","sourceRoot":"/"}